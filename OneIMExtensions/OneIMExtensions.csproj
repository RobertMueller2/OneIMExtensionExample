<Project Sdk="Microsoft.NET.Sdk">

  <Import Project="..\shared.props" />
  <PropertyGroup>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <Configurations>OneIM900;OneIM910;OneIM911;OneIM912;OneIM913;OneIM920;OneIM921;OneIM930</Configurations>
    <OutputPath>..\build\$(Configuration)\</OutputPath>
  </PropertyGroup>

  <Target Name="GenerateExtensionSettings" BeforeTargets="BeforeBuild">
    <PropertyGroup>
      <ExtensionSettings>$(MSBuildProjectDirectory)\GeneratedExtensionSettings.cs</ExtensionSettings>
      <Namespace>$(RootNamespace)</Namespace>
      <Content>
namespace OneIMExtensions {

    /// &lt;summary&gt;
    /// Autogenerated in .csproj file from localsettings.props just before build.
    /// 
    /// This might look wrong immediately after switching build configurations but
    /// should be corrected when running a build.
    /// 
    /// Do not edit manually, any changes will be overwritten.
    /// &lt;/summary&gt;
    public static class ExtensionSettings {

        public const string OneIMBaseDir = @"$(OneIMBaseDir)"%3b
        public const string OneIMDBConnString = @"$(ConnectionString)"%3b
        public const string NLogFilename = @"$(NlogFilename)"%3b

    }
}
      </Content>
    </PropertyGroup>
    <ItemGroup>
      <Compile Remove="$(ExtensionSettings)" />
      <Compile Include="$(ExtensionSettings)" />
    </ItemGroup>
    <WriteLinesToFile File="$(ExtensionSettings)" Lines="$(Content)" Overwrite="true" Encoding="Unicode" />
  </Target>

</Project>
